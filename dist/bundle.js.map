{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ab2b26e57595eb24597a","webpack:///./src/layer/Layer.ts","webpack:///./src/layer/GeojsonLayer.ts","webpack:///./src/layer/LightBeamMarker.ts","webpack:///./src/layer/OBJMarker.ts","webpack:///./src/layer/ParticleEffectsMarker.ts","webpack:///./src/layer/TagMarker.ts","webpack:///./src/layer/TextTagMarker.ts","webpack:///./src/index.ts","webpack:///./src/layer/AltizureProjectMarker.ts","webpack:///./src/layer/CameraMarker.ts","webpack:///./src/layer/PolyCylinderLineMarker.ts","webpack:///./src/layer/PolyLineMarker.ts","webpack:///./src/layer/ZoneMarker.ts","webpack:///./src/map/Map.ts","webpack:///./src/map/Play.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hky\"] = factory();\n\telse\n\t\troot[\"hky\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ab2b26e57595eb24597a","import { Map } from \"../map/Map\";\r\n/**\r\n * \r\n */\r\nexport abstract class Layer {\r\n    options: any;\r\n\r\n    map!: Map;\r\n    zoomAnimated: any;\r\n\r\n    /***\r\n     * \r\n     */\r\n    public guid?: string;\r\n\r\n    /**\r\n     * \r\n     */\r\n    public title: string | undefined;\r\n\r\n    visible: boolean = false;\r\n\r\n    constructor() { }\r\n\r\n    // \r\n    /**\r\n     * \r\n     * @param map \r\n     */\r\n    addTo(map: Map): Promise<Layer> {\r\n        map.addLayer(this);\r\n        this.map = map;\r\n        return Promise.resolve(this);\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     */\r\n    getMap(): Map | undefined {\r\n        return this.map;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    abstract remove(): number;\r\n\r\n    /**\r\n     * \r\n     * @param map \r\n     */\r\n    removeFrom(map: Map): Layer {\r\n        if (map) {\r\n            map.removeLayer(this);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    abstract refresh(): void;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layer/Layer.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * Geojson\r\n */\r\nexport class GeojsonLayer extends Layer {\r\n\r\n\tgeoJsonHttpUrl: string;\r\n\t//json:any;\r\n\tcrs: string;\r\n\r\n\tpolygons!: altizure.PolygonMarker[];\r\n\r\n\t/**\r\n\t * Geojson\r\n\t * @param url geosjonHttp\r\n\t * @param crs \r\n\t */\r\n\tconstructor(url: string, crs: string) {\r\n\t\tsuper();\r\n\t\tthis.geoJsonHttpUrl = url;\r\n\t\t//this.json = JSON.parse(jsonstr) ;\r\n\t\tthis.crs = crs;\r\n\t\tthis.polygons = new Array<altizure.PolygonMarker>();\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n\t\tconsole.log(this);\r\n\t\tthis.polygons.forEach(_ => _.destruct());\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): void {\r\n\t \r\n\t\tfetch(this.geoJsonHttpUrl, {\r\n\t\t\tmode: 'cors',\r\n\t\t\theaders: {\r\n\t\t\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t\t},\r\n\t\t}).then((response: Response) => {\r\n\t\t\tresponse.json().then(\r\n\t\t\t\tjson => {\r\n\t\t\t\t\tlet polygonMarkers = altizure.GeoJson.polygonsFromGeoJson(json, this.map.sandbox, {\r\n\t\t\t\t\t\ttop: 20,\r\n\t\t\t\t\t\tbottom: 0.1,\r\n\t\t\t\t\t\tcolor: 0xffffff * Math.random(),\r\n\t\t\t\t\t\topacity: 0.2\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tthis.polygons = polygonMarkers;\r\n\t\t\t\t\t//\r\n\t\t\t\t\tif(polygonMarkers.length>0){\r\n\t\t\t\t\t\tlet pose = Object.assign({}, this.polygons[0].position) as altizure.Pose;\r\n\t\t\t\t\t\tpose.alt = pose.alt+1000;\r\n\t\t\t\t\t\tpose.tilt = 45;\r\n\t\t\t\t\t\tthis.map.flyTo( pose,1000) ;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}); \r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/GeojsonLayer.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * LightBeamMarker \r\n */\r\nexport class LightBeamMarker extends Layer {\r\n \r\n  lightBeamMarker!: altizure.LightBeamMarkerOptions;\r\n  loptions:any;\r\n\t/**\r\n\t * AltizureProjectMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.LightBeamMarkerOptions) {\r\n    super(); \r\n    this.loptions  = option;\r\n    this.lightBeamMarker = new altizure.LightBeamMarker(this.loptions);\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n    console.log(this);  \r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): any { \r\n    //this.addTo(this.map); \r\n\t\t//return this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/LightBeamMarker.ts","import { Layer } from \"./Layer\";\r\nimport { AltizureProjectMarker } from \"./AltizureProjectMarker\";\r\n\r\n/**\r\n * OBJMarker \r\n */\r\nexport class OBJMarker extends Layer {\r\n \r\n  ibjMarker!: altizure.OBJMarker;\r\n\tioptions:any;\r\n\tposecnt:number;\r\n\t/**\r\n\t * TagMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.OBJMarkerOptions) {\r\n    super(); \r\n\t\tthis.ioptions  = option;\r\n\t\tthis.posecnt = 0;\r\n\t\tthis.ibjMarker = new altizure.OBJMarker(this.ioptions);\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n\t\tconsole.log(this);  \r\n\t\tthis.ibjMarker.destruct();\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): void { \r\n    //this.addTo(this.map);\r\n    \r\n    //this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t * @param points  \r\n\t * @param turnTime \r\n\t * @param speed veryslow turnTime*4; slowturnTime*2; normalturnTime*1; fastturnTime*0.5; veryfastturnTime*0.25\r\n\t * @param amark \r\n\t */\r\n\tmove(points:Array<altizure.LngLatAlt>, turnTime: number,speed:string,amark:altizure.AltizureProjectMarker,sandbox:altizure.Sandbox){\r\n\t\tlet path = new Array<altizure.LngLatAlt>();\r\n\t\tif(points.length<2){\r\n\t\t\tconsole.log(\"2\");\r\n\t\t\treturn;\r\n\t\t} \r\n\t\tlet frequency = \t100 ; //   \r\n\t\t//\r\n\t\tlet pathdis = new Array<number>();// \r\n\t\tlet pathfrequency = new Array<number>();//\r\n\t\tlet disall = 0 ;//\r\n\t\tfor(let i = 0 ; i < points.length - 1; i++){\r\n\t\t\tlet dis = Math.abs(sandbox.calculateDistanceBetweenTwoPoints( points[i+1],points[i]));\r\n\t\t\tpathdis.push(dis);\r\n\t\t\tdisall += dis;\r\n\t\t}  \r\n\t\tfor(let i = 0 ; i < pathdis.length; i++){ \r\n\t\t\tpathfrequency.push(Math.round(pathdis[i]/disall *  frequency) ) ;\r\n\t\t} \r\n\t\tfor(let i = 0 ; i < points.length - 1; i++){ \r\n\t\t\tfor(let j = 0 ; j < pathfrequency[i]; j++){\r\n\t\t\t\tlet lng =points[i].lng + (points[i+1].lng - points[i].lng)/pathfrequency[i]*j;\r\n\t\t\t\tlet lat =points[i].lat +  (points[i+1].lat - points[i].lat)/pathfrequency[i]*j;\r\n\t\t\t\tlet alt = points[i].alt +  (points[i+1].alt - points[i].alt)/pathfrequency[i]*j;\r\n\t\t\t\t\r\n\t\t\t\tpath.push({lng:lng,lat:lat,alt:alt})\r\n\t\t\t}  \r\n\t\t}\r\n\t\t//\r\n\t\ttry\r\n\t\t{ \r\n\t\t\tlet alts = amark.pickDepthMap(path); \r\n\t\t\tfor(let i = 0 ; i < alts.length; i++){ \r\n\t\t\t\tpath[i].alt = alts[i] ;\r\n\t\t\t} \r\n\t\t}catch \t\t\t\t\r\n\t\t{\r\n\r\n\t\t}\r\n\t\tthis.MuiltiPose(path,turnTime/frequency,speed,points)\r\n\t}\r\n  //\r\n\tpublic MuiltiPose(aps: Array<altizure.LngLatAlt>, turnTime: number,speed:string,pointangle:Array<altizure.LngLatAlt> )  {\r\n\t\tlet array1:Array<object> = new Array<object>(); \r\n\t\tlet Multiple = 1;\r\n\t\tif(speed ==\"veryslow\"){\r\n\t\t\t\tMultiple = 4;\r\n\t\t}else if(speed ==\"slow\"){\r\n\t\t\t\tMultiple = 2;\r\n\t\t}else if(speed ==\"fast\"){\r\n\t\t\t\tMultiple = 0.5;\r\n\t\t}else if(speed ==\"veryfast\"){\r\n\t\t\t\tMultiple = 0.25;\r\n\t\t}  \r\n\t\tlet omark  = this;\r\n\t\t//\r\n\t\tfor(let i = 0 ; i < pointangle.length-1; i++){ \r\n\t\t\tif(this.posecnt <aps.length && pointangle[i].lat == aps[this.posecnt].lat && pointangle[i].lng == aps[this.posecnt].lng)\r\n\t\t\t{\r\n\t\t\t\tthis.ibjMarker.euler = {z:this.GetAngle(pointangle[i],pointangle[i+1])}\r\n\t\t\t}\r\n\t\t} \r\n\t\tthis.ibjMarker.position = aps[omark.posecnt];\r\n\t\tlet poseout;\r\n\t\tif(this.posecnt <aps.length ){\r\n\t\t\t\tposeout = setTimeout(function(){omark.MuiltiPose(aps,turnTime,speed,pointangle)},turnTime*Multiple) ;\r\n\t\t\t\tthis.posecnt++;\r\n\t\t}else{\r\n\t\t\t\tclearTimeout(poseout);\r\n\t\t\t\tthis.posecnt = 0;\r\n\t\t}\r\n}\r\npublic GetAngle(  pntFirst:altizure.LngLatAlt,   pntNext:altizure.LngLatAlt)\r\n{\r\n\t\tlet dRotateAngle = Math.atan2(Math.abs(pntFirst.lng - pntNext.lng), Math.abs(pntFirst.lat - pntNext.lat));\r\n\t\tif (pntNext.lng >= pntFirst.lng)\r\n\t\t{\r\n\t\t\t\tif (pntNext.lat >= pntFirst.lat)\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t\tdRotateAngle = Math.PI - dRotateAngle;\r\n\t\t\t\t\t\t//dRotateAngle = 2*Math.PI - dRotateAngle;\r\n\t\t\t\t}\r\n\t\t}\r\n\t\telse            \r\n\t\t{\r\n\t\t\t\tif (pntNext.lat >= pntFirst.lat)\r\n\t\t\t\t{\r\n\t\t\t\t\t\tdRotateAngle = 2 * Math.PI - dRotateAngle;\r\n\t\t\t\t\t\t//dRotateAngle =  Math.PI/4 - dRotateAngle;\r\n\t\t\t\t}\r\n\t\t\t\telse                \r\n\t\t\t\t{\r\n\t\t\t\t\t\tdRotateAngle = Math.PI + dRotateAngle;\r\n\t\t\t\t\t\t//dRotateAngle = Math.PI + dRotateAngle;\r\n\t\t\t\t}\r\n\t\t}\r\n\t\t//dRotateAngle = dRotateAngle * 180 / Math.PI;\r\n\t\treturn dRotateAngle;\r\n} \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/OBJMarker.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * ParticleEffectsMarker \r\n */\r\nexport class ParticleEffectsMarker extends Layer {\r\n \r\n  particleEffectsMarker!: altizure.ParticleEffectsMarker;\r\n  coptions:any;\r\n\t/**\r\n\t * AltizureProjectMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.ParticleEffectsMarkerOptions) {\r\n    super(); \r\n    this.coptions  = option;\r\n    this.particleEffectsMarker = new altizure.ParticleEffectsMarker(this.coptions);\r\n    this.particleEffectsMarker.animatingTime = -1; \r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n    console.log(this);  \r\n    this.particleEffectsMarker.destruct();\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n \r\n\trefresh(): any { \r\n    //this.addTo(this.map);  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/ParticleEffectsMarker.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * TagMarker \r\n */\r\nexport class TagMarker extends Layer {\r\n \r\n  tagMarker!: altizure.TagMarker;\r\n  toptions:any;\r\n\t/**\r\n\t * TagMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.TagMarkerOptions) {\r\n    super(); \r\n\t\tthis.toptions  = option;\r\n\t\tthis.tagMarker = new altizure.TagMarker(this.toptions);\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n\t\tconsole.log(this);  \r\n\t\tthis.tagMarker.destruct();\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): void { \r\n    //this.addTo(this.map);\r\n    \r\n    //this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/TagMarker.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * TextTagMarker \r\n */\r\nexport class TextTagMarker extends Layer {\r\n \r\n  textTagMarker!: altizure.TextTagMarker;\r\n  toptions:any;\r\n\t/**\r\n\t * TextTagMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.TextTagMarkerOptions) {\r\n    super(); \r\n\t\tthis.toptions  = option;\r\n\t\tthis.textTagMarker = new altizure.TextTagMarker(this.toptions);\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n\t\tconsole.log(this);  \r\n\t\tthis.textTagMarker.destruct();\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): void { \r\n    //this.addTo(this.map);\r\n    \r\n    //this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/TextTagMarker.ts","/**\r\n * JavaScript\r\n */\r\nexport * from './map/Map';\r\nexport * from './layer/GeojsonLayer';\r\nexport * from './layer/AltizureProjectMarker';\r\nexport * from './layer/TextTagMarker';\r\nexport * from './layer/CameraMarker';\r\nexport * from './layer/ParticleEffectsMarker';\r\nexport * from './layer/TagMarker';\r\nexport * from './layer/OBJMarker';\r\nexport * from './layer/LightBeamMarker';\r\nexport * from './layer/ZoneMarker';\r\nexport * from './layer/PolyLineMarker';\r\nexport * from './layer/PolyCylinderLineMarker';\r\nexport * from './map/Play';\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * AltizureProjectMarker \r\n */\r\nexport class AltizureProjectMarker extends Layer {\r\n \r\n  altizureProjectMarker!: altizure.AltizureProjectMarker;\r\n  aoptions:any;\r\n\t/**\r\n\t * AltizureProjectMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.APMOptions) {\r\n    super(); \r\n    this.aoptions  = option;\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n    console.log(this);  \r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): any { \r\n    //this.addTo(this.map); \r\n\t\treturn this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/AltizureProjectMarker.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * AltizureProjectMarker \r\n */\r\nexport class CameraMarker extends Layer {\r\n \r\n  cameraMarker!: altizure.CameraMarker;\r\n  coptions:any;\r\n\t/**\r\n\t * AltizureProjectMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.CameraMarkerOptions) {\r\n    super(); \r\n    this.coptions  = option;\r\n\t\tthis.cameraMarker = new altizure.CameraMarker(this.coptions);\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n    console.log(this);  \r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n  rotate( ){\r\n    let cmark =this.cameraMarker;\r\n    let map = this.map;\r\n    let m = 1 \r\n    setInterval(function(){    \r\n      cmark.euler = {z: Math.PI/m};  \r\n      map.sandbox.camera.flyToCamToEarth(cmark.camToEarth);\r\n      m++;\r\n    }, 2000);\r\n   /*  this.cameraMarker.euler = {y: Math.PI/4};  \r\n    this.map.sandbox.camera.flyToCamToEarth(this.cameraMarker.camToEarth); */\r\n  }\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): any { \r\n    //this.addTo(this.map);  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/CameraMarker.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * PolyLineMarker \r\n */\r\nexport class PolyCylinderLineMarker extends Layer {\r\n \r\n  polylineMarker!: altizure.PolyCylinderLineMarker;\r\n  ploptions:any;\r\n\t/**\r\n\t * PolyCylinderLineMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor( option :altizure.PLCOPtion) {\r\n    super(); \r\n  /*   let pts2 = points\r\n      .map(function(lnglatalt)  {\r\n        return new altizure.LngLatAlt(lnglatalt[0], lnglatalt[1], lnglatalt[2])\r\n      });\r\n    option.points = pts2; */\r\n\t\tthis.ploptions  = option;\r\n    this.polylineMarker = new altizure.PolyCylinderLineMarker(this.ploptions);\r\n   \r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n\t\tconsole.log(this);  \r\n\t\tthis.polylineMarker.destruct();\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): void { \r\n    //this.addTo(this.map);\r\n    \r\n    //this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/PolyCylinderLineMarker.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * PolyLineMarker \r\n */\r\nexport class PolyLineMarker extends Layer {\r\n \r\n  polylineMarker!: altizure.PolyLineMarker;\r\n  ploptions:any;\r\n\t/**\r\n\t * PolyLineMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor( option :altizure.PLOPtion) {\r\n    super(); \r\n  /*   let pts2 = points\r\n      .map(function(lnglatalt)  {\r\n        return new altizure.LngLatAlt(lnglatalt[0], lnglatalt[1], lnglatalt[2])\r\n      });\r\n    option.points = pts2; */\r\n\t\tthis.ploptions  = option;\r\n    this.polylineMarker = new altizure.PolyLineMarker(this.ploptions);\r\n   \r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n\t\tconsole.log(this);  \r\n\t\tthis.polylineMarker.destruct();\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): void { \r\n    //this.addTo(this.map);\r\n    \r\n    //this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/PolyLineMarker.ts","import { Layer } from \"./Layer\";\r\n/**\r\n * OBJMarker \r\n */\r\nexport class ZoneMarker extends Layer {\r\n \r\n  zoneMarker!: altizure.ZoneMarker;\r\n  zoptions:any;\r\n\t/**\r\n\t * TagMarker\r\n\t * @param earth \r\n\t * @param crs \r\n\t */\r\n\tconstructor(option :altizure.ZoneMarkerOptions) {\r\n    super(); \r\n\t\tthis.zoptions  = option; \r\n\t\tthis.zoneMarker = new altizure.ZoneMarker(this.zoptions);\r\n\t}\r\n\r\n\tremove(): number {\r\n\t\tconsole.log(\"remove\");\r\n\t\tconsole.log(this);  \r\n\t\tthis.zoneMarker.destruct();\r\n\t\tthis.removeFrom(this.map);\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\trefresh(): void { \r\n    //this.addTo(this.map);\r\n    \r\n    //this.map.sandbox.add('AltizureProjectMarker',this.aoptions )  \r\n  }  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/ZoneMarker.ts","import { Layer } from \"../layer/Layer\";\r\nimport { url } from \"inspector\";\r\nimport { parse } from \"url\";\r\nimport { promises } from \"fs\";\r\nexport class Map {\r\n    public sandbox!: altizure.Sandbox;\r\n\r\n    /**\r\n     * \r\n     */\r\n    layers!: Layer[];\r\n    divID!: string;\r\n    posecnt:number;\r\n    SinglePoint:altizure.Pose;//\r\n    SinglePointduration:number ;//\r\n    SinglePointbeginTime : number;//\r\n    SinglePointendTime : number;//\r\n    SinglePointendpose:altizure.Pose;//\r\n    popupdiv:any;//\r\n    framediv:any;// \r\n    dispoints: Array<altizure.LngLatAlt>;\r\n    map:any;\r\n    iscancel = false ;\r\n    reduceNum:number;//reduce\r\n    reduceStatue:boolean;//reduce\r\n    reduceArray:Array<object>;\r\n    isflystop = false ;\r\n\r\n    constructor(id: string, options: altizure.SanboxOptions) {\r\n        this.sandbox = new altizure.Sandbox(id, options);\r\n        this.layers = new Array<Layer>();\r\n        this.divID = id;\r\n        this.posecnt = 0;\r\n        this.SinglePoint = { tilt:0, north:0, lng:0, lat:0, alt:0} ;\r\n        this.SinglePointendpose = { tilt:0, north:0, lng:0, lat:0, alt:0} ;\r\n        this.SinglePointbeginTime = 0;\r\n        this.SinglePointendTime = 0;\r\n        this.SinglePointduration = 0 ;\r\n        this.dispoints = new Array<altizure.LngLatAlt>(); \r\n        this.reduceNum = 0;\r\n        this.reduceStatue = true;\r\n        this.reduceArray = new Array<object>();\r\n        console.log(\"map created.\");\r\n        window.document.oncontextmenu = function(){ return false; }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param layer \r\n     * @returns \r\n     */\r\n    public removeLayer(layer: Layer): number {\r\n        const layerIndex = this.layers.indexOf(layer);\r\n        if (layerIndex > -1) {\r\n            this.layers.splice(layerIndex, 1);\r\n        }\r\n        return layerIndex;\r\n    }\r\n\r\n    public addLayer(layer: Layer): any {\r\n        this.layers.push(layer);\r\n    }\r\n\r\n    public flyTo(p: altizure.Pose, duration: number): Promise<object> {\r\n        this.isflystop = false;\r\n        this.SinglePoint  = p;\r\n        this.SinglePointduration = duration;\r\n        this.SinglePointbeginTime = new Date().getTime();//\r\n        return this.sandbox.camera.flyTo(p,duration)  \r\n    }\r\n    public flystop(): Promise<object> {\r\n        this.isflystop = true;\r\n        this.SinglePointendTime = new Date().getTime();//\r\n        this.SinglePointendpose = this.sandbox.camera.pose;\r\n        return this.sandbox.camera.stop();\r\n    }\r\n   public continueflyTo(): Promise<object>{\r\n        if(this.SinglePointendTime == 0){\r\n            console.log(\"\");\r\n            return  Promise.resolve( {}) ;\r\n        }\r\n        let array1:Array<object> = new Array<object>(); \r\n        let continueduration = this.SinglePointduration - (this.SinglePointendTime - this.SinglePointbeginTime);\r\n        this.sandbox.camera.pose = this.SinglePointendpose;\r\n        return this.flyTo(this.SinglePoint, continueduration );\r\n\r\n   }\r\n\r\n   public singlefly(flymode:string, endPoint: altizure.Pose, turnTime: number,speed:string ){\r\n    let Multiple = 1;\r\n    if(speed ==\"veryslow\"){\r\n        Multiple = 4;\r\n    }else if(speed ==\"slow\"){\r\n        Multiple = 2;\r\n    }else if(speed ==\"fast\"){\r\n        Multiple = 0.5;\r\n    }else if(speed ==\"veryfast\"){\r\n        Multiple = 0.25;\r\n    };\r\n    if(flymode.toLocaleLowerCase()==\"fly\"){\r\n        this.flyTo(endPoint,Multiple*turnTime)\r\n    }else if(flymode.toLocaleLowerCase()==\"pose\"){\r\n        this.Pose(endPoint )\r\n    }else if(flymode.toLocaleLowerCase()==\"lineto\"){\r\n        this.LineTo(endPoint,turnTime,speed,this);\r\n    }  \r\n\r\n   }\r\n\r\n\r\n    /**\r\n     * LineTo\r\n     * @param startPoint \r\n     * @param endPoint  \r\n     * @param turnTime \r\n     * @param speed : veryslow turnTime*4; slowturnTime*2; normalturnTime*1; fastturnTime*0.5; veryfastturnTime*0.25 \r\n     */\r\n    public LineTo( endPoint: altizure.Pose, turnTime: number,speed:string,map:any)  {\r\n        let pathpoint = 100 ;//100\r\n        let path = new Array<altizure.Pose>();\r\n        let startPoint = this.sandbox.camera.pose;\r\n        for(let j = 0 ; j < pathpoint; j++){\r\n            let lng = startPoint.lng + (endPoint.lng - startPoint.lng)/pathpoint*j;\r\n            let lat = startPoint.lat + (endPoint.lat - startPoint.lat)/pathpoint*j;\r\n            let alt = startPoint.alt + (endPoint.alt - startPoint.alt)/pathpoint*j;\r\n            let tilt = startPoint.tilt + (endPoint.tilt - startPoint.tilt)/pathpoint*j;\r\n            let north = startPoint.north + (endPoint.north - startPoint.north)/pathpoint*j;\r\n            path.push({lng:lng,lat:lat,alt:alt,tilt:tilt,north:north})\r\n        }  \r\n\r\n        return  this.MuiltiFlyto(path,turnTime,speed)\r\n    }\r\n\r\n    public Multipointfly(flymode:string,points: Array<altizure.Pose>, turnTime: number,speed:string )  {\r\n        \r\n        if(flymode.toLocaleLowerCase()==\"fly\"){\r\n            return this.MuiltiFlyto(points, turnTime,speed);\r\n        }else if(flymode.toLocaleLowerCase()==\"pose\"){\r\n            this.MuiltiPose(points, turnTime,speed,this ) \r\n        }else if(flymode.toLocaleLowerCase()==\"lineto\"){\r\n            return this.MuiltiLineTo(points, turnTime,speed);\r\n        }  \r\n    \r\n       }\r\n     /**\r\n     * MuiltiLineTo\r\n     * @param points  \r\n     * @param turnTime \r\n     * @param speed : veryslow turnTime*4; slowturnTime*2; normalturnTime*1; fastturnTime*0.5; veryfastturnTime*0.25 \r\n     */\r\n    public MuiltiLineTo(points: Array<altizure.Pose>, turnTime: number,speed:string ): Promise<void>  {\r\n        let path = new Array<altizure.Pose>();\r\n\t\tif(points.length<2){\r\n\t\t\tconsole.log(\"2\");\r\n\t\t\treturn  Promise.resolve() ;\r\n\t\t} \r\n\t\tlet frequency = 100 ; //   \r\n\t\t//\r\n\t\tlet pathdis = new Array<number>();// \r\n\t\tlet pathfrequency = new Array<number>();//\r\n\t\tlet disall = 0 ;//\r\n\t\tfor(let i = 0 ; i < points.length - 1; i++){\r\n\t\t\tlet dis = Math.abs(this.sandbox.calculateDistanceBetweenTwoPoints( points[i+1],points[i]));\r\n\t\t\tpathdis.push(dis);\r\n\t\t\tdisall += dis;\r\n        }  \r\n        //0\r\n        if(disall==0){\r\n            for(let i = 0 ; i < pathdis.length ; i++){\r\n                pathfrequency.push(frequency/points.length ) ;\r\n            } \r\n        }else{ \r\n            for(let i = 0 ; i < pathdis.length; i++){  \r\n                if(pathdis[i]==0){\r\n                    pathfrequency.push(frequency/points.length) ;\r\n                }else{\r\n                    pathfrequency.push(Math.round(pathdis[i]/disall *  frequency) ) ;\r\n                }\r\n               \r\n            } \r\n        }\r\n       \r\n\t\tfor(let i = 0 ; i < points.length - 1; i++){ \r\n\t\t\tfor(let j = 0 ; j < pathfrequency[i]; j++){\r\n\t\t\t\tlet lng =points[i].lng + (points[i+1].lng - points[i].lng)/pathfrequency[i]*j;\r\n\t\t\t\tlet lat =points[i].lat +  (points[i+1].lat - points[i].lat)/pathfrequency[i]*j;\r\n\t\t\t\tlet alt = points[i].alt +  (points[i+1].alt - points[i].alt)/pathfrequency[i]*j;\r\n\t\t\t\tlet tilt = points[i].tilt + (points[i+1].tilt - points[i].tilt)/pathfrequency[i]*j;\r\n                let north = points[i].north + (points[i+1].north - points[i].north)/pathfrequency[i]*j;\r\n                path.push({lng:lng,lat:lat,alt:alt,tilt:tilt,north:north})\r\n\t\t\t}  \r\n\t\t}\r\n\t\t \r\n        return this.MuiltiFlyto(path,turnTime,speed)\r\n    }\r\n     /**\r\n     * \r\n     * @param aps \r\n     * @param turnTime \r\n     * @param speed : veryslow turnTime*4; slowturnTime*2; normalturnTime*1; fastturnTime*0.5; veryfastturnTime*0.25 \r\n     */\r\n    public MuiltiFlyto(aps: Array<altizure.Pose>, turnTime: number,speed:string ): Promise<void>  {\r\n        let array1:Array<object> = new Array<object>();\r\n        let map = this;\r\n        let Multiple = 1;\r\n        if(speed ==\"veryslow\"){\r\n            Multiple = 4;\r\n        }else if(speed ==\"slow\"){\r\n            Multiple = 2;\r\n        }else if(speed ==\"fast\"){\r\n            Multiple = 0.5;\r\n        }else if(speed ==\"veryfast\"){\r\n            Multiple = 0.25;\r\n        }\r\n        //\r\n\t\tlet pathdis = new Array<number>();// \r\n\t\tlet pathtime = new Array<number>();//\r\n\t\tlet disall = 0 ;//\r\n\t\tfor(let i = 0 ; i < aps.length - 1; i++){\r\n\t\t\tlet dis = Math.abs(map.sandbox.calculateDistanceBetweenTwoPoints( aps[i+1],aps[i]));\r\n\t\t\tpathdis.push(dis);\r\n\t\t\tdisall += dis;\r\n        }  \r\n          //0\r\n          if(disall==0){\r\n            for(let i = 0 ; i < pathdis.length ; i++){\r\n                pathtime.push(Multiple*turnTime/aps.length ) ;\r\n            } \r\n        }else{ \r\n            for(let i = 0 ; i < pathdis.length; i++){  \r\n                if(pathdis[i]==0){\r\n                    pathtime.push(Multiple*turnTime/aps.length ) ;\r\n                }else{\r\n                    pathtime.push(Math.round(Multiple*turnTime*pathdis[i]/disall) ) ;\r\n                }\r\n               \r\n            } \r\n        } \r\n        //  \r\n        map.sandbox.camera.pose = aps[0];\r\n        for(let i = 0 ; i < aps.length - 1; i++){\r\n            if( aps.length - 2 == i){\r\n                array1.push( function() {\r\n                    if(map.reduceStatue){\r\n                        map.reduceNum = 0 ; \r\n                        return map.flyTo(aps[i+1], pathtime[i] )\r\n                    }\r\n                })\r\n            }else{ \r\n                array1.push( function() {\r\n                    if(map.reduceStatue){\r\n                        map.reduceNum ++ ; \r\n                        return map.flyTo(aps[i+1], pathtime[i] )\r\n                    }\r\n                })\r\n            }\r\n        }   \r\n        return this.reduce(array1)\r\n         \r\n    }\r\n    public flyToCamToEarth(mat: Array<number>, duration: number): Promise<object> {\r\n        return this.sandbox.camera.flyToCamToEarth(mat,duration);\r\n    }\r\n   \r\n      /**\r\n     * \r\n     * @param aps \r\n     * @param turnTime \r\n     * @param speed : veryslow turnTime*4; slowturnTime*2; normalturnTime*1; fastturnTime*0.5; veryfastturnTime*0.25\r\n     */\r\n    public MuiltiflyToCamToEarth(aps: Array<Array<number>>, turnTime: number,speed:string) : Promise<void>  {\r\n        let array1:Array<object> = new Array<object>();\r\n        let map = this;\r\n        let Multiple = 1;\r\n        if(speed ==\"veryslow\"){\r\n            Multiple = 4;\r\n        }else if(speed ==\"slow\"){\r\n            Multiple = 2;\r\n        }else if(speed ==\"fast\"){\r\n            Multiple = 0.5;\r\n        }else if(speed ==\"veryfast\"){\r\n            Multiple = 0.25;\r\n        }\r\n        for(let i = 0 ; i < aps.length - 1; i++){\r\n            if( aps.length - 2 == i){\r\n                array1.push( function() {\r\n                    if(map.reduceStatue){\r\n                        map.reduceNum = 0 ; \r\n                        return map.flyToCamToEarth(aps[i+1], turnTime*Multiple )\r\n                    }\r\n                })\r\n            }else{ \r\n                array1.push( function() {\r\n                    if(map.reduceStatue){\r\n                        map.reduceNum ++ ; \r\n                        return map.flyToCamToEarth(aps[i+1], turnTime*Multiple )\r\n                    }\r\n                })\r\n            }\r\n        }   \r\n        /* aps.forEach(value=>\r\n            array1.push( function() {return map.flyToCamToEarth(value, turnTime*Multiple)})\r\n        );  */\r\n        return this.reduce(array1) \r\n    }\r\n    public reduce(arr:Array<any>) : Promise<void> {\r\n        var sequence = Promise.resolve() \r\n        this.reduceArray = arr;\r\n        arr.forEach(value=>\r\n            sequence = sequence.then(value)\r\n        ) \r\n        /* for(let i = 0 ; i < arr.length;i++){\r\n            if(this.reduceStatue){ \r\n                sequence = sequence.then(arr[i]);\r\n                this.reduceNum ++ ;\r\n            }else{\r\n                break;\r\n            }\r\n            if(this.reduceNum ==arr.length ){\r\n                this.reduceNum = 0;\r\n            }\r\n        } */\r\n        return sequence\r\n    }\r\n    public reduceContinue(){\r\n        this.reduceStatue = true;\r\n        let array1:Array<object> = new Array<object>();\r\n        for(let i = this.reduceNum ; i < this.reduceArray.length;i++){\r\n            array1[i-this.reduceNum] = this.reduceArray[i];\r\n        } \r\n        this.reduceNum  = 0;\r\n        //this.reduce(array1);\r\n        this.reduceArray = array1;\r\n        return  array1;\r\n    }\r\n\r\n    public Pose(p: altizure.Pose) {\r\n        this.sandbox.camera.pose = p ;\r\n    } \r\n \r\n    /**\r\n     * \r\n     * @param aps \r\n     * @param turnTime \r\n     * @param speed : veryslow turnTime*4; slowturnTime*2; normalturnTime*1; fastturnTime*0.5; veryfastturnTime*0.25\r\n     */\r\n    public MuiltiPose(aps: Array<altizure.Pose>, turnTime: number,speed:string,map:any)  {\r\n        let array1:Array<object> = new Array<object>(); \r\n        let Multiple = 1;\r\n        if(speed ==\"veryslow\"){\r\n            Multiple = 4;\r\n        }else if(speed ==\"slow\"){\r\n            Multiple = 2;\r\n        }else if(speed ==\"fast\"){\r\n            Multiple = 0.5;\r\n        }else if(speed ==\"veryfast\"){\r\n            Multiple = 0.25;\r\n        } \r\n        if(map==null){\r\n            map = this;\r\n        }\r\n        map.sandbox.camera.pose = aps[map.posecnt];\r\n        let poseout;\r\n        if(map.posecnt <aps.length ){\r\n            poseout = setTimeout(function(){map.MuiltiPose(aps,turnTime,speed,map)},turnTime*Multiple/aps.length) ;\r\n            map.posecnt++;\r\n        }else{\r\n            clearTimeout(poseout);\r\n            map.posecnt = 0;\r\n        }\r\n    }\r\n    public getView(): altizure.LngLatAlt[] {\r\n        const mapDom = document.getElementById(this.divID) as HTMLElement;\r\n        const bottomLeft = this.sandbox.window.toLngLatAlt({ x: 0, y: mapDom.clientHeight });\r\n        const topRight = this.sandbox.window.toLngLatAlt({ x: mapDom.clientWidth, y: 0 });\r\n        return [bottomLeft, topRight];\r\n    }  \r\n     /**\r\n     * camera360\r\n     * @param tilt \r\n     * @param circle \r\n     * @param startPosition : 30(30)\r\n     * @param direction : Clockwise(); CounterClockwise()\r\n     * @param angularSpeed : 30(30)\r\n     * @param turnTime  \r\n     * @returns promise\r\n     */\r\n    public circleflyTo(tilt: number, circle: altizure.Pose,startPosition:number,direction:string,angularSpeed:number,turnTime:number){\r\n        //\r\n        const InitPpose =  circle;\r\n        InitPpose.tilt = tilt;\r\n        InitPpose.north = startPosition; \r\n        let aps: Array<altizure.Pose> = new Array<altizure.Pose>();\r\n        aps.push(InitPpose); \r\n        let currentNorth = startPosition;\r\n        let muilti = 0;\r\n        muilti =turnTime /1000 * angularSpeed; // \r\n        muilti = muilti/(angularSpeed/10);//5   \r\n        if(direction == \"CounterClockwise\"){ \r\n            for(let i=0 ; i< muilti ;i++ ){\r\n                let position1 = Object.assign({}, InitPpose);  \r\n                currentNorth = currentNorth+(angularSpeed/10) ;\r\n                if(currentNorth >= 360){\r\n                    currentNorth = currentNorth - 360;\r\n                }\r\n                position1.north = currentNorth;\r\n                aps.push(position1);\r\n            }\r\n        }else{\r\n            for(let i=0 ; i< muilti ;i++ ){\r\n                let position1 = Object.assign({}, InitPpose); \r\n                currentNorth = currentNorth-(angularSpeed/10);\r\n                if(currentNorth<=0){\r\n                    currentNorth = 360 + currentNorth ;\r\n                }\r\n                position1.north = currentNorth;\r\n                aps.push(position1);\r\n            }\r\n        }\r\n        //let time = 1000 / angularSpeed * (angularSpeed/10);\r\n        /* if(angularSpeed !=null){\r\n            time = 1/angularSpeed*1000 * 5;\r\n        }else{\r\n            time = turnTime/72;\r\n        } */\r\n        return this.MuiltiLineTo(aps,turnTime,\"normal\");\r\n    }\r\n /**\r\n     * camera360360\r\n     * @param tilt \r\n     * @param circle \r\n     * @param startPosition : 30(30)\r\n     * @param direction : Clockwise(); CounterClockwise()\r\n     * @param angularSpeed : 30(30)\r\n     * @param turnTime   \r\n     */\r\n    public rorateflyTo( circle: altizure.Pose, direction:string,angularSpeed:number,turnTime:number): Promise<void>{\r\n        //\r\n        const InitPpose =  circle; \r\n        let map = this;\r\n        let aps: Array<Array<number>> = new Array<Array<number>>();\r\n        let currentYeuler = 0;\r\n        let muilti = 0;\r\n        muilti =turnTime /1000 * angularSpeed; //\r\n        muilti = muilti/5;//5   \r\n        this.Pose(InitPpose);\r\n        let cmarker = new altizure.CameraMarker({\r\n            sandbox: map.sandbox, camToEarth: map.sandbox.camera.mat, showFar: false, showNear: false, color: 0xff0000,showXYZ: false,\r\n            name:\"rorateCamera\"\r\n        })\r\n        cmarker.euler = {x: Math.PI / 2, y: 0, z: 0}\r\n       \r\n        if(direction == \"CounterClockwise\"){ \r\n            for(let i=0 ; i< muilti ;i++ ){ \r\n                currentYeuler = currentYeuler+Math.PI * 2/360*5 ;\r\n                if(currentYeuler >= Math.PI * 2){\r\n                    currentYeuler = currentYeuler - Math.PI * 2;\r\n                }\r\n                cmarker.euler = {y: currentYeuler}\r\n                aps.push(cmarker.camToEarth);\r\n            }\r\n        }else{\r\n            for(let i=0 ; i< muilti ;i++ ){ \r\n                currentYeuler = currentYeuler - Math.PI * 2/360*5 ;\r\n                if(currentYeuler<=0){\r\n                    currentYeuler = Math.PI * 2 + currentYeuler ;\r\n                }\r\n                cmarker.euler = {y: currentYeuler}\r\n                aps.push(cmarker.camToEarth);\r\n            }\r\n        }\r\n        return  map.MuiltiflyToCamToEarth(aps,turnTime/muilti,\"normal\") \r\n    }\r\n\r\n    public removerorate(){\r\n        this.removeMarker(\"rorateCamera\");\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param name  \r\n     */\r\n    public removeMarker(name:string )  {\r\n        let marks = this.sandbox.markerLayer.children; \r\n        let SelectIndex: Array<number> = new Array<number>();  \r\n        for(let i=0 ; i< marks.length ;i++ ){\r\n            if(name == marks[i].name){\r\n                SelectIndex.push(i);\r\n            }\r\n        }\r\n        if(SelectIndex.length==0){\r\n            //if(name != \"dis\")\r\n             //console.log(\"\"+name+\" \")\r\n        }else{\r\n            for(let i=SelectIndex.length - 1 ; i>=0 ;i--){\r\n                this.sandbox.markerLayer.removeChild(marks[SelectIndex[i]]);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param position \r\n     *  @html \r\n     */\r\n    public popup(position:altizure.LngLatAlt,width:number,height:number,html:string,img:string,audio:string,video:string,iscal=false){\r\n        if(this.popupdiv){\r\n            this.closepopup();\r\n        }\r\n        let pinDiv = <HTMLElement>document.createElement(\"div\");\r\n        pinDiv.style.width = width+\"px\";\r\n        pinDiv.style.height = height+ \"px\";\r\n        pinDiv.classList.add(\"popup\");\r\n\r\n        if(video!=\"\" && video != undefined){\r\n            let videoele = document.createElement(\"video\");\r\n            videoele.src= video ;\r\n            videoele.autoplay = true;\r\n            videoele.style.width = \"100%\";\r\n            pinDiv.appendChild(videoele);\r\n        }\r\n\r\n        if(audio!=\"\"&& audio != undefined){\r\n            let audioele = document.createElement(\"audio\");\r\n            audioele.src= audio ; \r\n            audioele.style.width = \"100%\";\r\n            pinDiv.appendChild(audioele); \r\n        }\r\n\r\n        if(img!=\"\"&& img != undefined){\r\n            let imgele = document.createElement(\"img\");\r\n            imgele.src= img ; \r\n            imgele.style.width = \"100%\";\r\n            pinDiv.appendChild(imgele);  \r\n        }\r\n        let pele = document.createElement(\"p\");\r\n        pele.innerHTML = (html); \r\n        pinDiv.appendChild(pele);  \r\n        pinDiv.style.position = \"absolute\"; \r\n        \r\n        if(iscal){\r\n            pinDiv.style.background = \"white\";\r\n            pinDiv.style.color = \"blue\";\r\n            pinDiv.style.marginTop=\"0px\";\r\n            let closeDiv = document.createElement(\"div\");\r\n            closeDiv.style.cssFloat = \"right\"; \r\n            closeDiv.style.color = \"blue\";\r\n            closeDiv.style.cursor = \"hand\";\r\n            closeDiv.innerHTML = \"X\"; \r\n            closeDiv.style.marginTop=\"-38px\";\r\n            let domElement = this.sandbox.domElement;  \r\n            let map = this;\r\n            closeDiv.onclick  = function(){\r\n                domElement.iscancel = false;\r\n                map.removeMarker(\"dis\");\r\n                map.closepopup();\r\n            }\r\n            pinDiv.appendChild(closeDiv);  \r\n            //let domElement = this.sandbox.domElement;  \r\n            //let closediv =\"<div style='float:right' onclick=function(){}>X</div>\"\r\n        } \r\n        document.body.appendChild(pinDiv);\r\n        this.popupdiv = pinDiv;\r\n        let mappopup = this;\r\n        mappopup.updatePosition(position,height)\r\n        this.sandbox.on('cameraChange', function(){mappopup.updatePosition(position,height)})\r\n    }\r\n    private updatePosition(position:altizure.LngLatAlt,height:number) {\r\n        // transforms from earth-space position {lng, lat, alt} to screen-space {x, y}\r\n        let screenPosition = this.sandbox.window.fromLngLatAlt(position)\r\n        if (screenPosition && this.popupdiv) {\r\n            this.popupdiv.style.left = screenPosition.x  + 'px'\r\n            this.popupdiv.style.top = (screenPosition.y - height) + 'px'\r\n        }\r\n    }\r\n    public closepopup(){\r\n        if(this.popupdiv == null){\r\n            //console.log(\"\");\r\n            return;\r\n        }\r\n        document.body.removeChild(this.popupdiv);\r\n        this.popupdiv = null;\r\n        this.sandbox.off('cameraChange', function(){});\r\n    }\r\n     /**\r\n     * \r\n     * @param position \r\n     *  @html \r\n     */\r\n    public frame( video:string,audio:string,img:string,html:string,width:number,height:number ){\r\n        if(this.framediv){\r\n            this.closeframe();\r\n        }\r\n        let framediv = <HTMLElement>document.createElement(\"div\");\r\n        framediv.style.width = width+\"px\";\r\n        framediv.style.height = height+ \"px\"; \r\n        framediv.classList.add(\"frame\");\r\n        if(video!=\"\"&& video != undefined){\r\n            let videoele = document.createElement(\"video\");\r\n            videoele.src= video ;\r\n            videoele.autoplay = true;\r\n            videoele.style.width = \"100%\";\r\n            framediv.appendChild(videoele);\r\n        }\r\n\r\n        if(audio!=\"\"&& audio != undefined){\r\n            let audioele = document.createElement(\"audio\");\r\n            audioele.src= audio ; \r\n            audioele.style.width = \"100%\";\r\n            framediv.appendChild(audioele); \r\n        }\r\n\r\n        if(img!=\"\"&& img != undefined){\r\n            let imgele = document.createElement(\"img\");\r\n            imgele.src= img ; \r\n            imgele.style.width = \"100%\";\r\n            framediv.appendChild(imgele);  \r\n        }\r\n        let pele = document.createElement(\"p\");\r\n        pele.innerHTML = (\"nbspnbsp\"+html); \r\n        framediv.appendChild(pele);  \r\n        document.body.appendChild(framediv);\r\n        this.framediv = framediv; \r\n    } \r\n    public closeframe(){\r\n        if(this.framediv == null){\r\n            //console.log(\"\");\r\n            return;\r\n        }\r\n        document.body.removeChild(this.framediv);\r\n        this.framediv = null; \r\n    }\r\n\r\n    public calculateDistance(){ \r\n        let map = this;\r\n        let domElement = this.sandbox.domElement; \r\n        domElement.map = this; \r\n        domElement.iscancel = false;\r\n        domElement.dispoints = new Array<altizure.LngLatAlt>(); \r\n        domElement.addEventListener('mousedown', this.handler, false)\r\n    }\r\n    public disablecalculateDistance(){\r\n        this.removeMarker(\"dis\");\r\n        this.closepopup();\r\n        let map = this;\r\n        \r\n        let domElement = this.sandbox.domElement;\r\n        domElement.map = this; \r\n        //domElement.addEventListener('mousedown', function(){}, false)\r\n        domElement.removeEventListener(\"mousedown\", this.handler,false);\r\n    }\r\n    public handler (event:any) {\r\n        let map = this.map;\r\n        let dispoints = this.dispoints;\r\n       /*  if(dispoints.length==0){\r\n            map.removeMarker(\"dis\");\r\n            map.closepopup();\r\n        } */\r\n        if(this.iscancel)\r\n        {\r\n            return;\r\n        }\r\n        if (event.button === 0) { // left button\r\n            let pt = map.sandbox.pickOnProjects(event)\r\n            if (!pt) {\r\n                console.log(\"\");\r\n                return\r\n              }else{\r\n                dispoints.push(pt);\r\n                //\r\n                if(dispoints.length>1){\r\n                    let pts2  = Array<altizure.LngLatAlt>(); \r\n                    pts2.push(dispoints[dispoints.length-2]);\r\n                    pts2.push(dispoints[dispoints.length-1]);\r\n                    let pl2 = new altizure.PolyCylinderLineMarker({\r\n                        name: 'dis',\r\n                        sandbox: map.sandbox,\r\n                        points: pts2,\r\n                        color: 0xb73026,  \r\n                        lineWidth:2\r\n                      })\r\n                }\r\n              }\r\n        }else if(event.button == 2) {\r\n            let pt = map.sandbox.pickOnProjects(event)\r\n            if (!pt) {\r\n                console.log(\"\");\r\n                return\r\n              }else{\r\n                dispoints.push(pt);\r\n                //\r\n                if(dispoints.length>1){\r\n                    let pts2  = Array<altizure.LngLatAlt>(); \r\n                    pts2.push(dispoints[dispoints.length-2]);\r\n                    pts2.push(dispoints[dispoints.length-1]);\r\n                    let pl2 = new altizure.PolyCylinderLineMarker({\r\n                        name: 'dis',\r\n                        sandbox: map.sandbox,\r\n                        points: pts2,\r\n                        color: 0xb73026,  \r\n                        lineWidth:2\r\n                      })\r\n                      let alldis = 0;\r\n                      for(let i = 0 ; i < dispoints.length - 1; i ++){\r\n                        alldis +=Math.abs(map.sandbox.calculateDistanceBetweenTwoPoints( dispoints[i+1],dispoints[i]));\r\n                      };\r\n                      map.popup(dispoints[dispoints.length-1],150,20,\"\"+Math.round(alldis)+\"\",\"\",\"\",\"\",true);\r\n                      dispoints.splice(0,dispoints.length);\r\n                      this.iscancel = true;\r\n                }\r\n              }\r\n        }\r\n      }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/Map.ts","import { Map } from \"./Map\";\r\nimport { Layer } from \"../layer/Layer\";\r\nimport { ParticleEffectsMarker } from \"../layer/ParticleEffectsMarker\"; \r\nimport { TagMarker } from \"../layer/TagMarker\"; \r\nimport { TextTagMarker } from \"../layer/TextTagMarker\";  \r\nimport { LightBeamMarker } from \"../layer/LightBeamMarker\"; \r\nimport { OBJMarker } from \"../layer/OBJMarker\"; \r\nimport { GeojsonLayer } from \"../layer/GeojsonLayer\"; \r\nexport class Play { \r\n\r\n  map!: Map;\r\n  layer!: Layer; \r\n  jsondata:any;\r\n  action:any;\r\n  amark:altizure.AltizureProjectMarker\r\n  step:number;\r\n  ispause:Boolean;//\r\n  isend :Boolean;//\r\n  actionType:string;//\r\n  actiondetaileType:string;//\r\n\r\n  constructor(map: Map,json:{},amark:altizure.AltizureProjectMarker) {\r\n    this.jsondata = json;\r\n    this.map = map;\r\n    this.amark = amark;\r\n    this.step = 0;\r\n    this.ispause = false;\r\n    this.isend = false;\r\n    this.actionType =\"\";\r\n    this.actiondetaileType =\"\";\r\n    this.action = this.jsondata.Presentations.Presentation.actions.action;\r\n  }\r\n\r\n  // \r\n   /**\r\n     * \r\n     * @param map \r\n     */\r\n  play( )  {  \r\n    //\r\n    var InitCamera =  this.jsondata.Presentations.Presentation.settings.InitCamera;\r\n    if(InitCamera!= null){\r\n      this.map.Pose(InitCamera);\r\n    }else{\r\n      return \"\";\r\n    }\r\n    let action = this.jsondata.Presentations.Presentation.actions.action;\r\n   /*  //\r\n    for(let i  = 0 ; i <action.length;i++ ){\r\n      action[i].isWorked = false;\r\n      action[i].ispause = false;\r\n    } */\r\n    this.isend = false;\r\n    this.ispause = false;\r\n    this.actions(this.action,this.map,this);\r\n  }\r\n  //\r\n  actions(action:any,map:Map,play=this){\r\n    //\r\n    if(this.ispause){\r\n      return;\r\n    }\r\n    let i = this.step;\r\n    if(i>=action.length){\r\n      this.isend = true;\r\n      return\r\n    }\r\n    if(action[i]._type==\"viewpoint\"){//\r\n      this.actionType = \"viewpoint\";\r\n      if(action[i].fly.flyMode.toLocaleLowerCase()==\"jumpto\")//\r\n      {\r\n        this.actiondetaileType = \"jumpto\";\r\n        let pose = {\r\n          lng:parseFloat( action[i].lng),\r\n          lat:parseFloat( action[i].lat),\r\n          alt:parseFloat( action[i].alt),\r\n          north:parseFloat( action[i].north),\r\n          tilt:parseFloat( action[i].tilt)\r\n        }\r\n        map.Pose(pose); \r\n        this.actiondetaileType = \"\";\r\n        if(parseFloat(action[i].trigger)>0){ \r\n          this.step++;\r\n          setTimeout(function(){play.actions(action,map,play)}, action[i].trigger) ;\r\n        }else if(parseFloat(action[i].trigger)==0){\r\n          this.step++;\r\n          play.actions(action,map,play)\r\n        } else { \r\n          play.step++;\r\n          this.ispause=true;\r\n        }   \r\n      }else if(action[i].fly.flyMode.toLocaleLowerCase()==\"flyto\"){//\r\n        this.actiondetaileType = \"flyto\";\r\n        let pose = {\r\n          lng:parseFloat( action[i].lng),\r\n          lat:parseFloat( action[i].lat),\r\n          alt:parseFloat( action[i].alt),\r\n          north:parseFloat( action[i].north),\r\n          tilt:parseFloat( action[i].tilt)\r\n        }\r\n        var turnTimef = parseInt(action[i].fly.turnTime)  ;\r\n        if(turnTimef<0){\r\n          console.log(\"turnTime0\");\r\n          return;\r\n        }\r\n        let Multiple = 1;\r\n        let speed = action[i].fly.speed;\r\n        if(speed ==\"veryslow\"){\r\n            Multiple = 4;\r\n        }else if(speed ==\"slow\"){\r\n            Multiple = 2;\r\n        }else if(speed ==\"fast\"){\r\n            Multiple = 0.5;\r\n        }else if(speed ==\"veryfast\"){\r\n            Multiple = 0.25;\r\n        }else if(speed ==\"normal\"){\r\n          Multiple = 1;\r\n        }else{\r\n            console.log(\"speed\");\r\n            return;\r\n        }\r\n\r\n        map.flyTo(pose,turnTimef*Multiple).then(function(){ \r\n          play.step++;\r\n         if(play.map.isflystop == true){\r\n            return;\r\n          } \r\n          play.actiondetaileType = \"\";\r\n          if(parseFloat(action[i].trigger)>0){ \r\n            setTimeout(function(){play.actions(action,map,play)}, action[i].trigger) ;\r\n          }else if(parseFloat(action[i].trigger)==0){ \r\n            play.actions(action,map,play)\r\n          } else {  \r\n            play.ispause=true;\r\n          }   \r\n        })\r\n      }else if(action[i].fly.flyMode.toLocaleLowerCase()==\"lineto\"){//\r\n        this.actiondetaileType = \"lineto\";\r\n        let pose = {\r\n          lng:parseFloat( action[i].lng),\r\n          lat:parseFloat( action[i].lat),\r\n          alt:parseFloat( action[i].alt),\r\n          north:parseFloat( action[i].north),\r\n          tilt:parseFloat( action[i].tilt)\r\n        }\r\n        let turnTimel = parseInt(action[i].fly.turnTime)  ;\r\n        if(turnTimel<0){\r\n          console.log(\"turnTime0\");\r\n          return;\r\n        }\r\n        let  speed = action[i].fly.speed\r\n        map.LineTo(  pose,turnTimel,speed,map).then(function(){ \r\n          \r\n          play.step++; \r\n          if(play.map.reduceNum !=0){\r\n            return;\r\n          }\r\n          play.actiondetaileType = \"\";\r\n          if(parseFloat(action[i].trigger)>0){\r\n            setTimeout(function(){play.actions(action,map,play)}, action[i].trigger) ;\r\n          }else if(parseFloat(action[i].trigger)==0){ \r\n            play.actions(action,map,play)\r\n          }else {  \r\n            play.ispause=true;\r\n          }   \r\n        });\r\n \r\n      }else{\r\n        console.log(\"flyMode\");\r\n        return;\r\n      }\r\n    }\r\n    else if(action[i]._type==\"route\"){//\r\n      this.actionType = \"route\";\r\n      //\r\n      let viewpoint = action[i].viewpoint;\r\n      if(viewpoint.length==0){\r\n        console.log(\"flyMode\");\r\n        return;\r\n      } \r\n      let point = Array<altizure.Pose>();\r\n      viewpoint.forEach(element => {\r\n        point.push({\r\n          lng : parseFloat(element.lng),\r\n          lat : parseFloat(element.lat),\r\n          alt : parseFloat(element.alt),\r\n          north : parseFloat(element.north),\r\n          tilt : parseFloat(element.tilt)\r\n        })\r\n      });  \r\n      let turnTimeroute = action[i].fly.turnTime - 0 ;//parseInt(action[i].fly.turnTime)  ;\r\n      if(turnTimeroute<0){\r\n        console.log(\"turnTime0\");\r\n        return;\r\n      }\r\n      let  speed = action[i].fly.speed \r\n      if(action[i].fly.flyMode.toLocaleLowerCase()==\"jumpto\")//\r\n      {            \r\n        this.actiondetaileType = \"jumpto\";\r\n        map.MuiltiPose(point,turnTimeroute,speed,map); \r\n        if(parseFloat(action[i].trigger)>0){ \r\n          play.actiondetaileType = \"\";\r\n          play.step++; \r\n          setTimeout(function(){play.actions(action,map)}, action[i].trigger) ;\r\n        }  else if(parseFloat(action[i].trigger)==0){\r\n          play.step++; \r\n          play.actions(action,map,play)\r\n        }  else { \r\n          play.step++;\r\n          play.ispause=true;\r\n        }   \r\n      }else if(action[i].fly.flyMode.toLocaleLowerCase()==\"flyto\"){//\r\n        this.actiondetaileType = \"flyto\";\r\n        map.MuiltiFlyto(point,turnTimeroute,speed).then(function(){ \r\n          play.step++; \r\n          if(play.map.reduceNum !=0){\r\n            return;\r\n          }\r\n          play.actiondetaileType = \"\";\r\n          if(parseFloat(action[i].trigger)>0){\r\n            setTimeout(function(){play.actions(action,map,play)}, action[i].trigger) ;\r\n          }else if(parseFloat(action[i].trigger)==0){ \r\n            play.actions(action,map,play)\r\n          }else {  \r\n            play.ispause=true;\r\n          }   \r\n        });\r\n      }else if(action[i].fly.flyMode.toLocaleLowerCase()==\"lineto\"){//\r\n        this.actiondetaileType = \"lineto\";\r\n        map.MuiltiLineTo(point,turnTimeroute,speed).then(function(){ \r\n          play.step++; \r\n          if(play.map.reduceNum !=0){\r\n            return;\r\n          }\r\n          play.actiondetaileType = \"\";\r\n          if(parseFloat(action[i].trigger)>0){\r\n            setTimeout(function(){play.actions(action,map,play)}, action[i].trigger) ;\r\n          }else if(parseFloat(action[i].trigger)==0){ \r\n            play.actions(action,map,play)\r\n          }else { \r\n            play.ispause=true;\r\n          }   \r\n        });; \r\n      }else{\r\n        console.log(\"flyMode\");\r\n        return;\r\n      }     \r\n     \r\n    }\r\n    else if(action[i]._type==\"circle\"){//\r\n      this.actionType = \"circle\";\r\n      let pose = {\r\n        lng:parseFloat(action[i].circle.lng),\r\n        lat:parseFloat(action[i].circle.lat),\r\n        alt:parseFloat(action[i].circle.alt),\r\n        north:parseFloat(action[i].circle.north),\r\n        tilt:parseFloat(action[i].camera.tilt)\r\n      }\r\n      let startPosition = parseFloat(action[i].fly.startPosition);\r\n      let direction = action[i].fly.direction;\r\n      let angularSpeed = parseFloat(action[i].fly.angularSpeed);\r\n      var turnTimeci = parseFloat(action[i].fly.turnTime);\r\n      map.circleflyTo(action[i].camera.tilt,pose,startPosition,direction,angularSpeed,turnTimeci).then(function(){  \r\n        play.step++;\r\n        if(play.map.reduceNum !=0){\r\n          return;\r\n        }\r\n        play.actionType = \"\";\r\n        if(parseFloat(action[i].trigger)>0){\r\n          setTimeout(function(){play.actions(action,map,play)}, action[i].trigger) ;\r\n        }else if(parseFloat(action[i].trigger)==0){ \r\n          play.actions(action,map,play)\r\n        }else {  \r\n          play.ispause=true;\r\n        }   \r\n      });\r\n    }\r\n    else if(action[i]._type==\"rotate\"){//\r\n      this.actionType = \"rotate\";\r\n      let pose = {\r\n        lng:parseFloat(action[i].camera.lng),\r\n        lat:parseFloat(action[i].camera.lat),\r\n        alt:parseFloat(action[i].camera.alt),\r\n        north:parseFloat(action[i].camera.north),\r\n        tilt:parseFloat(action[i].camera.tilt)\r\n      } \r\n      let direction = action[i].fly.direction;\r\n      let angularSpeed = parseFloat(action[i].fly.angularSpeed);\r\n      var turnTimero = parseFloat(action[i].fly.turnTime);\r\n      map.rorateflyTo(pose,direction,angularSpeed,turnTimero).then(function(){  \r\n        play.step++;\r\n        if(play.map.reduceNum !=0){\r\n          return;\r\n        }\r\n        play.actionType = \"\";\r\n        if(parseFloat(action[i].trigger)>0){\r\n          setTimeout(function(){\r\n            map.removerorate();\r\n            map.Pose(pose);\r\n            play.actions(action,map,play)\r\n          }, action[i].trigger) ;\r\n        }else if(parseFloat(action[i].trigger)==0){ \r\n            map.removerorate();\r\n            map.Pose(pose);\r\n            play.actions(action,map,play)\r\n        }else {  \r\n          play.ispause=true;\r\n        }   \r\n      })\r\n    }\r\n    else if(action[i]._type==\"particle\"){//\r\n      let position = {\r\n        lng : parseFloat(action[i].position.lng),\r\n        lat : parseFloat(action[i].position.lat),\r\n        alt : parseFloat(action[i].position.alt) \r\n      }\r\n      let option = {\r\n        position:position,\r\n        sandbox:map.sandbox,\r\n        effect:action[i].effect,\r\n        scale:parseInt( action[i].scale),\r\n        name:action[i].name\r\n      }  \r\n      let particle = new ParticleEffectsMarker(option); \r\n      if(action[i].trigger>0){\r\n        play.step++;\r\n        setTimeout(function(){\r\n          map.removeMarker(action[i].name);\r\n          play.actions(action,map)}, action[i].trigger) ;\r\n      }  else if(parseFloat(action[i].trigger)==0){\r\n        play.step++;\r\n        map.removeMarker(action[i].name);\r\n        play.actions(action,map,play)\r\n      }  else { \r\n        play.step++;\r\n        play.ispause=true;\r\n      }   \r\n    }\r\n    else if(action[i]._type==\"marker\"){//\r\n      let option = {\r\n        position:action[i].position,\r\n        sandbox:map.sandbox, \r\n        scale:parseFloat( action[i].scale),\r\n        name:action[i].name\r\n      }  \r\n      if(action[i].staticType.toLocaleLowerCase()==\"imgurl\"){//\r\n        let option1 = Object.assign({\r\n          imgUrl:action[i].imgUrl\r\n        }, option);  \r\n        let tagMarker = new TagMarker(option1);\r\n      } else if(action[i].staticType.toLocaleLowerCase()==\"text\"){//\r\n        let option1 = Object.assign({\r\n          text:action[i].text,\r\n          textStyle:action[i].textStyle\r\n        }, option);  \r\n        let textTagMarker = new TextTagMarker(option1);\r\n      }else if(action[i].staticType.toLocaleLowerCase()==\"lightbeam\"){//\r\n        let option1 = Object.assign({\r\n          color:action[i].color \r\n        }, option);  \r\n        let lightbeamMarker = new LightBeamMarker(option1);\r\n      }else if(action[i].staticType.toLocaleLowerCase()==\"staticobj\"){//\r\n        let option1 = Object.assign({\r\n          shape:action[i].shape, \r\n          objUrl:action[i].objUrl, \r\n          mtlUrl:action[i].mtlUrl, \r\n          upDir:action[i].upDir\r\n        }, option);  \r\n        let oBJMarker = new OBJMarker(option1);\r\n      } \r\n      if(action[i].trigger>0){\r\n        play.step++;\r\n        setTimeout(function(){\r\n          map.removeMarker(action[i].name);\r\n          play.actions(action,map)}, action[i].trigger) ;\r\n      }    else if(parseFloat(action[i].trigger)==0){\r\n        play.step++;\r\n        map.removeMarker(action[i].name);\r\n        play.actions(action,map,play)\r\n      }  else { \r\n        play.step++;\r\n        play.ispause=true;\r\n      }   \r\n    }\r\n    else if(action[i]._type==\"moveObj\"){//\r\n      /* let position = {\r\n        lng:action[i].lng,\r\n        lat:action[i].lat,\r\n        alt:action[i].alt\r\n      }  */\r\n      let position = {\r\n        lng : parseFloat(action[i].lng),\r\n        lat : parseFloat(action[i].lat),\r\n        alt : parseFloat(action[i].alt) \r\n      }\r\n      let option = {\r\n        position:position,\r\n        sandbox:map.sandbox, \r\n        scale:parseInt( action[i].scale),\r\n        shape:action[i].shape, \r\n        objUrl:action[i].objUrl, \r\n        mtlUrl:action[i].mtlUrl, \r\n        upDir:action[i].upDir,\r\n        name:action[i].name\r\n      }   \r\n      let obj = new OBJMarker(option);\r\n      if(action[i].isMove.toLocaleLowerCase()==\"true\"){ \r\n        let turnTimeobj = parseFloat(action[i].turnTime);\r\n        let  speed = action[i].speed ;  \r\n        obj.move(action[i].points.point,turnTimeobj,speed,this.amark,map.sandbox); \r\n      } \r\n      if(action[i].trigger>0){\r\n        play.step++;\r\n        setTimeout(function(){\r\n          map.removeMarker(action[i].name);\r\n          play.actions(action,map)}, action[i].trigger) ;\r\n      }   else if(parseFloat(action[i].trigger)==0){\r\n        play.step++;\r\n        map.removeMarker(action[i].name);\r\n        play.actions(action,map,play)\r\n      }   else { \r\n        play.step++;\r\n        play.ispause=true;\r\n      }   \r\n    }\r\n    else if(action[i]._type==\"layer\"){//\r\n      let layer ;\r\n      if(action[i].staticType.toLocaleLowerCase()==\"geojson\"){\r\n        layer = new GeojsonLayer(action[i].url,action[i].crs);\r\n      } \r\n      if(action[i].trigger>0){\r\n        play.step++; \r\n        setTimeout(function(){\r\n          layer.remove();\r\n          play.actions(action,map)}, action[i].trigger) ;\r\n      }   else if(parseFloat(action[i].trigger)==0){\r\n        play.step++; \r\n        layer.remove();\r\n        play.actions(action,map,play)\r\n      }   else { \r\n        play.step++;\r\n        play.ispause=true;\r\n      }   \r\n    }\r\n    else if(action[i]._type==\"balloon\"){//\r\n      let point = {\r\n        lng : parseFloat(action[i].lng),\r\n        lat : parseFloat(action[i].lat),\r\n        alt : parseFloat(action[i].alt) \r\n      }\r\n      map.popup(\r\n        point,parseInt(action[i].width),\r\n        parseInt(action[i].height),\r\n        action[i].htmlPatch.text,\r\n        action[i].htmlPatch.img,\r\n        action[i].htmlPatch.audio,\r\n        action[i].htmlPatch.video\r\n        ) \r\n      if(action[i].trigger>0){\r\n        play.step++;\r\n        setTimeout(function(){\r\n          map.closepopup();\r\n          play.actions(action,map)}, action[i].trigger) ;\r\n      }   else if(parseFloat(action[i].trigger)==0){\r\n        play.step++;\r\n        map.closepopup();\r\n        play.actions(action,map,play)\r\n      }   else { \r\n        play.step++;\r\n        play.ispause=true;\r\n      }     \r\n    }else if(action[i]._type==\"frame\"){// \r\n      map.frame( \r\n        action[i].htmlPatch.video,\r\n        action[i].htmlPatch.audio,\r\n        action[i].htmlPatch.img,\r\n        action[i].htmlPatch.text,\r\n        parseInt(action[i].width),\r\n        parseInt(action[i].height)\r\n        ) \r\n      if(action[i].trigger>0){\r\n        play.step++;\r\n        setTimeout(function(){\r\n          map.closeframe();\r\n          play.actions(action,map)}, action[i].trigger) ;\r\n      }   else if(parseFloat(action[i].trigger)==0){\r\n        play.step++;\r\n        map.closeframe();\r\n        play.actions(action,map,play)\r\n      } else {  \r\n        play.step++;\r\n        this.ispause=true;\r\n      }    \r\n    }\r\n  }\r\n  //\r\n  pause(){\r\n    this.ispause=true;\r\n    if(this.actionType == \"viewpoint\" && this.actiondetaileType==\"flyto\"){\r\n      this.map.flystop();\r\n    }else if((this.actionType == \"viewpoint\" && this.actiondetaileType==\"lineto\")\r\n    ||(this.actionType == \"route\" && (this.actiondetaileType==\"flyto\"||this.actiondetaileType==\"lineto\"))\r\n    ||(this.actionType == \"circle\")||(this.actionType == \"rotate\")\r\n    ){\r\n      this.map.reduceStatue = false;\r\n      }\r\n  }\r\n  //\r\n  stop( ){\r\n    this.ispause=true; \r\n    this.isend = true;\r\n    this.step = 0;\r\n    if(this.actionType == \"viewpoint\" && this.actiondetaileType==\"flyto\"){\r\n      this.map.flystop();\r\n    }else if((this.actionType == \"viewpoint\" && this.actiondetaileType==\"lineto\")\r\n    ||(this.actionType == \"route\" && (this.actiondetaileType==\"flyto\"||this.actiondetaileType==\"lineto\"))\r\n    ||(this.actionType == \"circle\")||(this.actionType == \"rotate\")\r\n    ){\r\n      this.map.reduceStatue = false;\r\n      }\r\n  }\r\n  //\r\n  contuinueaction(){\r\n    let play = this;\r\n    let array:Array<object> = new Array<object>();\r\n    this.removeMarker()\r\n    this.ispause=false;\r\n    if(this.actionType == \"viewpoint\" && this.actiondetaileType==\"flyto\"){\r\n      array.push(function() {return play.map.continueflyTo()});\r\n    }else \r\n    if((this.actionType == \"viewpoint\" && this.actiondetaileType==\"lineto\")\r\n  ||(this.actionType == \"route\" && (this.actiondetaileType==\"flyto\"||this.actiondetaileType==\"lineto\"))\r\n  ||(this.actionType == \"circle\")||(this.actionType == \"rotate\")\r\n  ){\r\n      //array.push(play.map.reduceContinue());//function() {return play.map.reduceContinue()}\r\n      if(play.map.reduceNum>0){ \r\n        let arr =play.map.reduceContinue();\r\n        arr.forEach(value=>\r\n          array.push(value)\r\n        )   \r\n      }\r\n    }\r\n    array.push(function() {/* play.step++; */ return play.actions(play.action,play.map,play)}); \r\n    this.reduce(array);\r\n  }\r\n  public reduce(arr:Array<any>) : Promise<void> {\r\n    var sequence = Promise.resolve() \r\n    arr.forEach(value=>\r\n        sequence = sequence.then(value)\r\n    ) \r\n    return sequence\r\n}\r\n  getstatue():Boolean{\r\n    return  this.isend ;\r\n  }\r\n  getpausestatue():Boolean{\r\n    return  this.ispause ;\r\n  }\r\n\r\n  removeMarker(  )  {\r\n    let marks = this.map.sandbox.markerLayer.children; \r\n    for(let i=marks.length - 1 ; i>=0 ;i--){\r\n      if(\"AltizureProjectMarker\" != marks[i].name)\r\n        this.map.sandbox.markerLayer.removeChild(marks[i]);\r\n     \r\n  } \r\n  this.map.closeframe(); \r\n  this.map.closepopup();\r\n}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/map/Play.ts"],"sourceRoot":""}